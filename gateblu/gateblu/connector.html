<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <script type="text/javascript">
      console.error = function(error) {
        window.webkit.messageHandlers.connectorNotification.postMessage({ connector: "{{connector}}", body: error });
      };
      console.log = console.error;
      window.onerror = function (errorMsg, url, lineNumber) {
        var values = Object.keys(arguments).map(function(key){return a[key]})
        console.log("Error occured: " + JSON.stringify(values)); //or any message
        return false;
      };
    </script>
    
    <script type="text/javascript" src="http://cdn.octoblu.com/js/{{connector}}/latest/{{connector}}.js"></script>
    <script type="text/javascript">
      (function() {
       if (typeof Connector !== 'function'){
         alert("{{connector}} plugin not compatible with mobile");
         return;
       }
       var connector = new Connector({
         uuid:"{{uuid}}",
         token:"{{token}}"
       });
       
       if(!connector){
         alert("{{connector}} plugin is invalid");
       
         return;
       }
       
       if(typeof connector.on === 'function' ){
         connector.on("config", function(device){
            window.webkit.messageHandlers.deviceConfig.postMessage({ device: device });
         });
       }
       
       if(typeof connector.run === 'function'){
          connector.run()
       }

       window.connector = connector;
      })();
    </script>
  </head>
  <body>
  </body>
</html>